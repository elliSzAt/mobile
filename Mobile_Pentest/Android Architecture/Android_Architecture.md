# Architecture

![alt text](/Mobile_Pentest/Android%20Architecture/images/0_UpDzEpW5OvTJr6Pk.webp)

Đây là kiến trúc cơ bản của một hệ thống Android. Android là một hệ điều hành mã nguồn mở dựa trên nền tảng Linux. Gồm có 6 tầng là Linux Kernel, Hardware Abstraction Layer – HAL, Android Runtime, Native C/C++ Libraries, Java API Framework, System Apps.

### The Linux Kernel: The Brain of Android

Linux Kernel (nhân linux) giúp mọi thứ trong hệ thống Android hoạt động trơn tru như thực hiện nhiều tác vụ cùng một lúc, quản lý bộ nhớ của thiết bị (RAM) giúp cho thiết bị không xảy ra tình trạng hết sạch bộ nhớ.

### Hardware Abstraction Layer (HAL): Your Device’s Translator

Thiết bị Android toàn bộ là phần cứng như máy ảnh, chip Bluetooth,... Để các ứng dụng và phần cứng giao tiếp được với nhau, lúc này ta cần đến HAL. HAL là thành phần giúp các ứng dụng và phần cứng có thể giao tiếp với nhau, khi API truy cập vào phần cứng của thiết bị, Android sẽ tải xuống các mô-đun cho các phần cứng đó.

### Android Runtime (ART): The App Magician

Android Runtime (ART) là môi trường chạy (runtime) được sử dụng bởi hệ điều hành Android để thực thi các ứng dụng. ART thay thế cho Dalvik, môi trường chạy trước đó trong các phiên bản Android cũ hơn (trước Android 5.0 Lollipop).

Dalvik VM sẽ thực thi biên dịch từ bytecode sang mã máy khi khởi chạy ứng dụng. Đối với ART thì mã bytecode sẽ được biên dịch ngay lúc cài đặt, điều này giúp làm giảm thời gian khởi động ứng dụng cho các lần sau và cải thiện được hiệu suất.

Ngoài ra ART còn nhiều nhiệm vụ khác như quản lý bộ nhớ, hỗ trợ debug,... ART còn có thể xử lý nhiều ứng dụng cùng một lúc.

### Native C/C++ Libraries: The Builders of Android’s Corev

Những thành phần và dịch vụ hệ thống cốt lõi như ART và HAL được xây dựng từ mã gốc, được viết bằng ngôn ngữ C và C++. Android cung cấp các khung API Java để hiển thị chức năng của một số thư viện C/C++ gốc (Native C/C++ Libraries) cho các ứng dụng. 

Khi sử dụng những tác vụ cần yêu cầu đồ họa hoặc hiệu năng ở mức cao, các thư viện này sẽ đáp ứng nhu cầu dành cho các tác vụ đó.

### Java API Framework: Building Blocks for App Magic

Java API Framework như một hộp công cụ dành cho các nhà phát triển ứng dụng. Bên trong, có các công cụ để tạo giao diện người dùng (UI), truy cập các tài nguyên như hình ảnh và chuỗi cũng như quản lý thông báo. Cho dù đó là thiết kế giao diện ứng dụng đẹp mắt hay xử lý các tác vụ nền, các API này đều đảm nhận nhiều công việc cho người tạo ứng dụng.

Các dịch vụ chính của Java API Framework bao gồm:
 - Trình quản lý hoạt động (Activity Manager): Kiểm soát tất cả các khía cạnh trong vòng đời của ứng dụng và activity stack.
 - Nhà cung cấp nội dung (Content Providers): Cho phép ứng dụng xuất bản và chia sẻ dữ liệu với các ứng dụng khác.
 - Trình quản lý tài nguyên (Resource Manager): Cung cấp quyền truy cập vào các tài nguyên không code như chuỗi, cài đặt màu, bố cục giao diện người dùng.
 - Trình quản lý thông báo (Notifications Manager): Cho phép ứng dụng hiển thị những cảnh báo và thông báo đến người dùng.
 - Hệ thống xem (View System): Tập hợp nhiều dạng khung hình có thể mở rộng, sử dụng để tạo giao diện cho người dùng ứng dụng.

### System Apps

Đây là tầng cao nhất trong một hệ thống Android, các ứng dụng được tạo ra sẽ được cài đặt trên tầng này.

# Android Virtual Machine

